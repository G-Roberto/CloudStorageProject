<!DOCTYPE html>
<html>
  <head>
    <title>Upload file to S3</title>
    <script src="https://unpkg.com/vue@1.0.28/dist/vue.js"></script>
    <script src="https://unpkg.com/axios@0.2.1/dist/axios.min.js"></script>
  </head>
  <body>            
      <h1>Storage Contents</h1>
      
      <input type="submit" value="Start" onclick="submit()">
      
      
      
      
      <script type="text/javascript">
          
          const API_ENDPOINT = 'https://cvegvoy1l2.execute-api.eu-central-1.amazonaws.com/default/show-items-in-bucket'
          const WEBSITE = 'https://sam-app-s3uploadbucket-1ut0y5lkfg694.s3.eu-central-1.amazonaws.com/'
          
          function submit() {
              
              // Send the GET request to the API gateway
              const response = axios({
                  method: 'GET',
                  url: API_ENDPOINT
              }).then ((response) => {
                  console.log(response);
                  
                  // Write the HTML page from JavaScript                  
                  document.write("<h1>Storage Contents</h1>");
                  document.write("<br><br>");
                  
                  // List all files in the database
                  for (let i = 1; i <= response[0]; i++) {
                      // Check what format the file is (e.g. image, text, executable...)
                      
                      // Load the corresponding thumbnail
                      
                      // Write a line on the page with the corresponding name, link and thumbnail
                      document.write('<a href="' + WEBSITE + response[i] + '">' + response[i] + '</a><br>');
                  }
                  
                  
              });
              
          }
            
      </script>
      
  </body>
</html>
